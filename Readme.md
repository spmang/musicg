Port of musicg from google code.

This is a complete refactor/rewrite of the code to support a stream api.
This allows the code to run with a much smaller footprint.